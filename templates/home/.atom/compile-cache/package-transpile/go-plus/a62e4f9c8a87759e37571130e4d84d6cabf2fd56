Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.translateType = translateType;
exports.matchFunc = matchFunc;
exports.parseType = parseType;
exports.ensureNextArg = ensureNextArg;
exports.parseParameters = parseParameters;
exports.upgradeToFuncSuggestion = upgradeToFuncSuggestion;
exports.funcSnippet = funcSnippet;
exports.anonymousFuncSnippet = anonymousFuncSnippet;
exports.funcArgSnippet = funcArgSnippet;
exports.funcReturnSnippet = funcReturnSnippet;
exports.generateSnippet = generateSnippet;
exports.toSuggestion = toSuggestion;
exports.toSuggestions = toSuggestions;
function translateType(type) {
  switch (type) {
    case 'func':
      return 'function';
    case 'package':
      return 'import';
    case 'var':
      return 'variable';
    case 'type':
      return 'type';
    case 'const':
      return 'constant';
    default:
      return 'value';
  }
}

function matchFunc(type) {
  if (!type || !type.startsWith('func(')) {
    return [undefined, undefined, undefined];
  }

  let count = 0;
  let args;
  let returns;
  let returnsStart = 0;
  for (let i = 0; i < type.length; i++) {
    if (type[i] === '(') {
      count = count + 1;
    }

    if (type[i] === ')') {
      count = count - 1;
      if (count === 0) {
        args = type.substring('func('.length, i);
        returnsStart = i + ') '.length;
        break;
      }
    }
  }

  if (type.length > returnsStart) {
    if (type[returnsStart] === '(') {
      returns = type.substring(returnsStart + 1, type.length - 1);
    } else {
      returns = type.substring(returnsStart, type.length);
    }
  }

  return [type, args, returns];
}

function parseType(type) {
  if (!type || type.trim() === '') {
    return {
      isFunc: false,
      name: ''
    };
  }
  const match = matchFunc(type);
  if (!match[0]) {
    return {
      isFunc: false,
      name: type
    };
  }

  const args = match[1];
  const returns = match[2];
  return {
    isFunc: true,
    name: type,
    args: args ? parseParameters(args) : [],
    returns: returns ? parseParameters(returns) : []
  };
}

function ensureNextArg(args) {
  if (!args || args.length === 0) {
    return [];
  }

  let arg = args[0];
  let hasFunc = false;
  if (arg.includes('func(')) {
    hasFunc = true;
  }
  if (!hasFunc) {
    return args;
  }
  let start = 4;
  if (!arg.startsWith('func(')) {
    let splitArg = arg.split(' ');
    if (!splitArg || splitArg.length < 2 || !splitArg[1].startsWith('func(')) {
      return args;
    }
    start = splitArg[0].length + 5;
  }

  const funcArg = args.join(', ');
  let end = 0;
  let count = 0;
  for (let i = start; i < funcArg.length; i++) {
    if (funcArg[i] === '(') {
      count = count + 1;
    } else if (funcArg[i] === ')') {
      count = count - 1;
      if (count === 0) {
        end = i + 1;
        break;
      }
    }
  }

  arg = funcArg.substring(0, end);
  if (arg.length === funcArg.length || !funcArg.substring(end + 2, funcArg.length).includes(', ')) {
    return [funcArg.trim()];
  }

  if (funcArg[end + 1] === '(') {
    for (let i = end + 1; i < funcArg.length; i++) {
      if (funcArg[i] === '(') {
        count = count + 1;
      } else if (funcArg[i] === ')') {
        count = count - 1;
        if (count === 0) {
          end = i + 1;
          break;
        }
      }
    }
  }

  arg = funcArg.substring(0, end);
  if (arg.length === funcArg.length || !funcArg.substring(end + 2, funcArg.length).includes(', ')) {
    return [funcArg.trim()];
  }

  for (let i = end; i < funcArg.length; i++) {
    if (funcArg[i] === ',') {
      arg = arg + funcArg.substring(end, i);
      end = i + 1;
      break;
    }
  }

  args = funcArg.substring(end + 1, funcArg.length).trim().split(', ');
  args.unshift(arg.trim());
  return args;
}

function parseParameters(p) {
  if (!p || p.trim() === '') {
    return [];
  }
  let args = p.split(/, /);
  const result = [];
  let more = true;
  while (more) {
    args = ensureNextArg(args);
    if (!args || args.length === 0) {
      more = false;
      continue;
    }
    const arg = args.shift();

    let type = parseType(arg);
    if (type.isFunc) {
      result.push({ name: arg, identifier: '', type });
      continue;
    }
    if (!arg.includes(' ')) {
      result.push({ name: arg, identifier: '', type });
      continue;
    }

    const split = arg.split(' ');
    if (!split || split.length < 2) {
      continue;
    }

    let identifier = split.shift();
    type = parseType(split.join(' '));
    result.push({ name: arg, identifier, type });
  }

  return result;
}

function upgradeToFuncSuggestion(ctx, suggestion, c) {
  if (!c.type || !c.type.includes('func(')) {
    return _extends({}, suggestion);
  }
  const type = parseType(c.type);
  if (!type.isFunc) {
    return _extends({}, suggestion, { leftLabel: '' });
  }

  let snippet, displayText;

  if (c.class === 'type') {
    const r = funcSnippet(ctx, type);
    snippet = c.name + '(' + r.snippet + ')';
    displayText = c.name;
  } else {
    const r = generateSnippet(ctx, c.name, type);
    snippet = r.snippet;
    displayText = r.displayText;

    suggestion.leftLabel = funcReturnSnippet(ctx, type).displayText;
  }

  snippet += '$0';
  if (ctx.snippetMode === 'none') {
    // user doesn't care about arg names/types
    snippet = c.name + '($1)$0';
  }

  return _extends({}, suggestion, {
    snippet,
    displayText,
    fuzzyMatch: c.name
  });
}

function funcSnippet(ctx, type) {
  const argSnippets = type.args.map(arg => funcArgSnippet(ctx, arg));

  let snippet = 'func(' + argSnippets.map(s => s.snippet).join(', ') + ')';
  let displayText = 'func(' + argSnippets.map(s => s.displayText).join(', ') + ')';

  const r = funcReturnSnippet(ctx, type);
  snippet += r.snippet ? ' ' + r.snippet : '';
  displayText += r.displayText ? ' ' + r.displayText : '';

  ctx.snipCount++;
  snippet += ' {\n\t$' + ctx.snipCount + '\n\\}';

  return { snippet, displayText };
}

function anonymousFuncSnippet(ctx, type) {
  // Generate an anonymous func
  ctx.snipCount++;
  const snip = ctx.snipCount;

  const r = funcSnippet(ctx, type);

  return {
    snippet: '${' + snip + ':' + r.snippet + '}',
    displayText: r.displayText
  };
}

function funcArgSnippet(ctx, param) {
  let argText = '';
  if (param.identifier) {
    argText = param.identifier + '';
  } else {
    ctx.argCount++;
    argText = 'arg' + ctx.argCount + '';
  }

  ctx.snipCount++;
  let snippet = '${' + ctx.snipCount + ':' + argText + '} ';
  let displayText = argText + ' ';

  if (param.type.isFunc) {
    const r = anonymousFuncSnippet(ctx, param.type);
    snippet += r.snippet;
    displayText += r.displayText;
  } else {
    const { name } = param.type;
    snippet += escapeCurlies(name);
    displayText += name;
  }

  return { snippet, displayText };
}

function funcReturnSnippet(ctx, type) {
  const results = type.returns.map(r => {
    return {
      snippet: escapeCurlies(r.type.name),
      displayText: r.name
    };
  });

  let snippet = results.map(r => r.snippet).join(', ');
  let displayText = results.map(r => r.displayText).join(', ');

  if (results.length > 1) {
    snippet = '(' + snippet + ')';
    displayText = '(' + displayText + ')';
  }
  return { snippet, displayText };
}

function generateSnippet(ctx, name, type) {
  const results = type.args.map((arg, i) => {
    if (arg.type.isFunc) {
      return anonymousFuncSnippet(ctx, arg.type);
    }

    // omit variadic arguments
    const generateArgSnippet = !(i === type.args.length - 1 && arg.type.name.startsWith('...'));
    let snippet = null;
    if (generateArgSnippet) {
      let argText = arg.name;
      if (ctx.snippetMode === 'name' && arg.identifier) {
        argText = arg.identifier;
      }
      argText = escapeCurlies(argText);
      ctx.snipCount++;
      snippet = '${' + ctx.snipCount + ':' + argText + '}';
    }
    return { snippet, displayText: arg.name };
  });

  let snippet = results.map(r => r.snippet).filter(r => r !== null).join(', ');
  let displayText = results.map(r => r.displayText).join(', ');

  snippet = name + '(' + snippet + ')';
  displayText = name + '(' + displayText + ')';

  return { snippet, displayText };
}

function toSuggestion(c, options) {
  let suggestion = {
    replacementPrefix: options.prefix,
    leftLabel: c.type || c.class,
    type: translateType(c.class)
  };
  const isFuncType = c.class === 'func' || c.class === 'type' && c.type.includes('func(');
  if (isFuncType && options.suffix !== '(') {
    const ctx = {
      snipCount: 0,
      argCount: 0,
      snippetMode: options.snippetMode
    };
    suggestion = upgradeToFuncSuggestion(ctx, suggestion, c);
  } else {
    suggestion.text = c.name;
    suggestion.fuzzyMatch = suggestion.text;
  }
  if (suggestion.type === 'package') {
    suggestion.iconHTML = '<i class="icon-package"></i>';
  }
  return suggestion;
}

function toSuggestions(candidates, options) {
  return candidates.map(c => toSuggestion(c, options));
}

const regexCurly = /{}/g;
function escapeCurlies(str) {
  return str.replace(regexCurly, '{\\}');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN1Z2dlc3Rpb25zLmpzIl0sIm5hbWVzIjpbInRyYW5zbGF0ZVR5cGUiLCJtYXRjaEZ1bmMiLCJwYXJzZVR5cGUiLCJlbnN1cmVOZXh0QXJnIiwicGFyc2VQYXJhbWV0ZXJzIiwidXBncmFkZVRvRnVuY1N1Z2dlc3Rpb24iLCJmdW5jU25pcHBldCIsImFub255bW91c0Z1bmNTbmlwcGV0IiwiZnVuY0FyZ1NuaXBwZXQiLCJmdW5jUmV0dXJuU25pcHBldCIsImdlbmVyYXRlU25pcHBldCIsInRvU3VnZ2VzdGlvbiIsInRvU3VnZ2VzdGlvbnMiLCJ0eXBlIiwic3RhcnRzV2l0aCIsInVuZGVmaW5lZCIsImNvdW50IiwiYXJncyIsInJldHVybnMiLCJyZXR1cm5zU3RhcnQiLCJpIiwibGVuZ3RoIiwic3Vic3RyaW5nIiwidHJpbSIsImlzRnVuYyIsIm5hbWUiLCJtYXRjaCIsImFyZyIsImhhc0Z1bmMiLCJpbmNsdWRlcyIsInN0YXJ0Iiwic3BsaXRBcmciLCJzcGxpdCIsImZ1bmNBcmciLCJqb2luIiwiZW5kIiwidW5zaGlmdCIsInAiLCJyZXN1bHQiLCJtb3JlIiwic2hpZnQiLCJwdXNoIiwiaWRlbnRpZmllciIsImN0eCIsInN1Z2dlc3Rpb24iLCJjIiwibGVmdExhYmVsIiwic25pcHBldCIsImRpc3BsYXlUZXh0IiwiY2xhc3MiLCJyIiwic25pcHBldE1vZGUiLCJmdXp6eU1hdGNoIiwiYXJnU25pcHBldHMiLCJtYXAiLCJzIiwic25pcENvdW50Iiwic25pcCIsInBhcmFtIiwiYXJnVGV4dCIsImFyZ0NvdW50IiwiZXNjYXBlQ3VybGllcyIsInJlc3VsdHMiLCJnZW5lcmF0ZUFyZ1NuaXBwZXQiLCJmaWx0ZXIiLCJvcHRpb25zIiwicmVwbGFjZW1lbnRQcmVmaXgiLCJwcmVmaXgiLCJpc0Z1bmNUeXBlIiwic3VmZml4IiwidGV4dCIsImljb25IVE1MIiwiY2FuZGlkYXRlcyIsInJlZ2V4Q3VybHkiLCJzdHIiLCJyZXBsYWNlIl0sIm1hcHBpbmdzIjoiOzs7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QVdELEVBQUVoQyxJQUFGLElBQVVnQyxFQUFFSSxLQUZTO0FBR2hDcEMsVUFBTWIsY0FBYzZDLEVBQUVJLEtBQWhCO0FBSDBCLEdBQWxDO0FBS0EsUUFBTW1CLGFBQ0p2QixFQUFFSSxLQUFGLEtBQVksTUFBWixJQUF1QkosRUFBRUksS0FBRixLQUFZLE1BQVosSUFBc0JKLEVBQUVoQyxJQUFGLENBQU9nQixRQUFQLENBQWdCLE9BQWhCLENBRC9DO0FBRUEsTUFBSXVDLGNBQWNILFFBQVFJLE1BQVIsS0FBbUIsR0FBckMsRUFBMEM7QUFDeEMsVUFBTTFCLE1BQVc7QUFDZmEsaUJBQVcsQ0FESTtBQUVmSSxnQkFBVSxDQUZLO0FBR2ZULG1CQUFhYyxRQUFRZDtBQUhOLEtBQWpCO0FBS0FQLGlCQUFhdkMsd0JBQXdCc0MsR0FBeEIsRUFBNkJDLFVBQTdCLEVBQXlDQyxDQUF6QyxDQUFiO0FBQ0QsR0FQRCxNQU9PO0FBQ0xELGVBQVcwQixJQUFYLEdBQWtCekIsRUFBRXBCLElBQXBCO0FBQ0FtQixlQUFXUSxVQUFYLEdBQXdCUixXQUFXMEIsSUFBbkM7QUFDRDtBQUNELE1BQUkxQixXQUFXL0IsSUFBWCxLQUFvQixTQUF4QixFQUFtQztBQUNqQytCLGVBQVcyQixRQUFYLEdBQXNCLDhCQUF0QjtBQUNEO0FBQ0QsU0FBTzNCLFVBQVA7QUFDRDs7QUFFTSxTQUFTaEMsYUFBVCxDQUNMNEQsVUFESyxFQUVMUCxPQUZLLEVBR1M7QUFDZCxTQUFPTyxXQUFXbEIsR0FBWCxDQUFlVCxLQUFLbEMsYUFBYWtDLENBQWIsRUFBZ0JvQixPQUFoQixDQUFwQixDQUFQO0FBQ0Q7O0FBRUQsTUFBTVEsYUFBYSxLQUFuQjtBQUNBLFNBQVNaLGFBQVQsQ0FBdUJhLEdBQXZCLEVBQTRDO0FBQzFDLFNBQU9BLElBQUlDLE9BQUosQ0FBWUYsVUFBWixFQUF3QixNQUF4QixDQUFQO0FBQ0QiLCJmaWxlIjoic3VnZ2VzdGlvbnMuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvbXl1Z2EvLmF0b20vcGFja2FnZXMvZ28tcGx1cy9saWIvYXV0b2NvbXBsZXRlIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcblxuaW1wb3J0IHR5cGUgeyBTdWdnZXN0aW9uLCBTdWdnZXN0aW9uVHlwZSB9IGZyb20gJy4vcHJvdmlkZXInXG5pbXBvcnQgdHlwZSB7IEdvQ29kZVN1Z2dlc3Rpb24sIFNuaXBwZXRNb2RlIH0gZnJvbSAnLi9nb2NvZGVwcm92aWRlcidcblxudHlwZSBPcHRpb25zID0ge3xcbiAgcHJlZml4OiBzdHJpbmcsXG4gIHN1ZmZpeDogc3RyaW5nLFxuICBzbmlwcGV0TW9kZTogU25pcHBldE1vZGVcbnx9XG5cbnR5cGUgQ3R4ID0ge3xcbiAgc25pcENvdW50OiBudW1iZXIsXG4gIGFyZ0NvdW50OiBudW1iZXIsXG4gIHNuaXBwZXRNb2RlOiBTbmlwcGV0TW9kZVxufH1cblxudHlwZSBGdXp6eVN1Z2dlc3Rpb24gPSBTdWdnZXN0aW9uICYge1xuICBmdXp6eU1hdGNoPzogc3RyaW5nXG59XG5cbnR5cGUgU25pcHBldCA9IHt8XG4gIHNuaXBwZXQ6IHN0cmluZyxcbiAgZGlzcGxheVRleHQ6IHN0cmluZ1xufH1cblxudHlwZSBHb1BhcmFtID0ge3xcbiAgbmFtZTogc3RyaW5nLFxuICBpZGVudGlmaWVyOiBzdHJpbmcsXG4gIHR5cGU6IEdvVHlwZSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG58fVxuXG50eXBlIEdvTm9uRnVuY1R5cGUgPSB7XG4gIGlzRnVuYzogZmFsc2UsXG4gIG5hbWU6IHN0cmluZ1xufVxuXG50eXBlIEdvRnVuY1R5cGUgPSB7fFxuICBpc0Z1bmM6IHRydWUsXG4gIG5hbWU6IHN0cmluZyxcbiAgYXJnczogQXJyYXk8R29QYXJhbT4sXG4gIHJldHVybnM6IEFycmF5PEdvUGFyYW0+XG58fVxuXG50eXBlIEdvVHlwZSA9IEdvTm9uRnVuY1R5cGUgfCBHb0Z1bmNUeXBlXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGVUeXBlKHR5cGU6IHN0cmluZyk6IFN1Z2dlc3Rpb25UeXBlIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnZnVuYyc6XG4gICAgICByZXR1cm4gJ2Z1bmN0aW9uJ1xuICAgIGNhc2UgJ3BhY2thZ2UnOlxuICAgICAgcmV0dXJuICdpbXBvcnQnXG4gICAgY2FzZSAndmFyJzpcbiAgICAgIHJldHVybiAndmFyaWFibGUnXG4gICAgY2FzZSAndHlwZSc6XG4gICAgICByZXR1cm4gJ3R5cGUnXG4gICAgY2FzZSAnY29uc3QnOlxuICAgICAgcmV0dXJuICdjb25zdGFudCdcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICd2YWx1ZSdcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hGdW5jKHR5cGU6IHN0cmluZyk6IFs/c3RyaW5nLCA/c3RyaW5nLCA/c3RyaW5nXSB7XG4gIGlmICghdHlwZSB8fCAhdHlwZS5zdGFydHNXaXRoKCdmdW5jKCcpKSB7XG4gICAgcmV0dXJuIFt1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuICB9XG5cbiAgbGV0IGNvdW50ID0gMFxuICBsZXQgYXJnc1xuICBsZXQgcmV0dXJuc1xuICBsZXQgcmV0dXJuc1N0YXJ0ID0gMFxuICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGUubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodHlwZVtpXSA9PT0gJygnKSB7XG4gICAgICBjb3VudCA9IGNvdW50ICsgMVxuICAgIH1cblxuICAgIGlmICh0eXBlW2ldID09PSAnKScpIHtcbiAgICAgIGNvdW50ID0gY291bnQgLSAxXG4gICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgYXJncyA9IHR5cGUuc3Vic3RyaW5nKCdmdW5jKCcubGVuZ3RoLCBpKVxuICAgICAgICByZXR1cm5zU3RhcnQgPSBpICsgJykgJy5sZW5ndGhcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAodHlwZS5sZW5ndGggPiByZXR1cm5zU3RhcnQpIHtcbiAgICBpZiAodHlwZVtyZXR1cm5zU3RhcnRdID09PSAnKCcpIHtcbiAgICAgIHJldHVybnMgPSB0eXBlLnN1YnN0cmluZyhyZXR1cm5zU3RhcnQgKyAxLCB0eXBlLmxlbmd0aCAtIDEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybnMgPSB0eXBlLnN1YnN0cmluZyhyZXR1cm5zU3RhcnQsIHR5cGUubGVuZ3RoKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbdHlwZSwgYXJncywgcmV0dXJuc11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVHlwZSh0eXBlOiBzdHJpbmcpOiBHb1R5cGUge1xuICBpZiAoIXR5cGUgfHwgdHlwZS50cmltKCkgPT09ICcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzRnVuYzogZmFsc2UsXG4gICAgICBuYW1lOiAnJ1xuICAgIH1cbiAgfVxuICBjb25zdCBtYXRjaCA9IG1hdGNoRnVuYyh0eXBlKVxuICBpZiAoIW1hdGNoWzBdKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzRnVuYzogZmFsc2UsXG4gICAgICBuYW1lOiB0eXBlXG4gICAgfVxuICB9XG5cbiAgY29uc3QgYXJncyA9IG1hdGNoWzFdXG4gIGNvbnN0IHJldHVybnMgPSBtYXRjaFsyXVxuICByZXR1cm4ge1xuICAgIGlzRnVuYzogdHJ1ZSxcbiAgICBuYW1lOiB0eXBlLFxuICAgIGFyZ3M6IGFyZ3MgPyBwYXJzZVBhcmFtZXRlcnMoYXJncykgOiBbXSxcbiAgICByZXR1cm5zOiByZXR1cm5zID8gcGFyc2VQYXJhbWV0ZXJzKHJldHVybnMpIDogW11cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlTmV4dEFyZyhhcmdzOiBBcnJheTxzdHJpbmc+KTogQXJyYXk8c3RyaW5nPiB7XG4gIGlmICghYXJncyB8fCBhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgbGV0IGFyZyA9IGFyZ3NbMF1cbiAgbGV0IGhhc0Z1bmMgPSBmYWxzZVxuICBpZiAoYXJnLmluY2x1ZGVzKCdmdW5jKCcpKSB7XG4gICAgaGFzRnVuYyA9IHRydWVcbiAgfVxuICBpZiAoIWhhc0Z1bmMpIHtcbiAgICByZXR1cm4gYXJnc1xuICB9XG4gIGxldCBzdGFydCA9IDRcbiAgaWYgKCFhcmcuc3RhcnRzV2l0aCgnZnVuYygnKSkge1xuICAgIGxldCBzcGxpdEFyZyA9IGFyZy5zcGxpdCgnICcpXG4gICAgaWYgKCFzcGxpdEFyZyB8fCBzcGxpdEFyZy5sZW5ndGggPCAyIHx8ICFzcGxpdEFyZ1sxXS5zdGFydHNXaXRoKCdmdW5jKCcpKSB7XG4gICAgICByZXR1cm4gYXJnc1xuICAgIH1cbiAgICBzdGFydCA9IHNwbGl0QXJnWzBdLmxlbmd0aCArIDVcbiAgfVxuXG4gIGNvbnN0IGZ1bmNBcmcgPSBhcmdzLmpvaW4oJywgJylcbiAgbGV0IGVuZCA9IDBcbiAgbGV0IGNvdW50ID0gMFxuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBmdW5jQXJnLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGZ1bmNBcmdbaV0gPT09ICcoJykge1xuICAgICAgY291bnQgPSBjb3VudCArIDFcbiAgICB9IGVsc2UgaWYgKGZ1bmNBcmdbaV0gPT09ICcpJykge1xuICAgICAgY291bnQgPSBjb3VudCAtIDFcbiAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICBlbmQgPSBpICsgMVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFyZyA9IGZ1bmNBcmcuc3Vic3RyaW5nKDAsIGVuZClcbiAgaWYgKFxuICAgIGFyZy5sZW5ndGggPT09IGZ1bmNBcmcubGVuZ3RoIHx8XG4gICAgIWZ1bmNBcmcuc3Vic3RyaW5nKGVuZCArIDIsIGZ1bmNBcmcubGVuZ3RoKS5pbmNsdWRlcygnLCAnKVxuICApIHtcbiAgICByZXR1cm4gW2Z1bmNBcmcudHJpbSgpXVxuICB9XG5cbiAgaWYgKGZ1bmNBcmdbZW5kICsgMV0gPT09ICcoJykge1xuICAgIGZvciAobGV0IGkgPSBlbmQgKyAxOyBpIDwgZnVuY0FyZy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGZ1bmNBcmdbaV0gPT09ICcoJykge1xuICAgICAgICBjb3VudCA9IGNvdW50ICsgMVxuICAgICAgfSBlbHNlIGlmIChmdW5jQXJnW2ldID09PSAnKScpIHtcbiAgICAgICAgY291bnQgPSBjb3VudCAtIDFcbiAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgZW5kID0gaSArIDFcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXJnID0gZnVuY0FyZy5zdWJzdHJpbmcoMCwgZW5kKVxuICBpZiAoXG4gICAgYXJnLmxlbmd0aCA9PT0gZnVuY0FyZy5sZW5ndGggfHxcbiAgICAhZnVuY0FyZy5zdWJzdHJpbmcoZW5kICsgMiwgZnVuY0FyZy5sZW5ndGgpLmluY2x1ZGVzKCcsICcpXG4gICkge1xuICAgIHJldHVybiBbZnVuY0FyZy50cmltKCldXG4gIH1cblxuICBmb3IgKGxldCBpID0gZW5kOyBpIDwgZnVuY0FyZy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChmdW5jQXJnW2ldID09PSAnLCcpIHtcbiAgICAgIGFyZyA9IGFyZyArIGZ1bmNBcmcuc3Vic3RyaW5nKGVuZCwgaSlcbiAgICAgIGVuZCA9IGkgKyAxXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGFyZ3MgPSBmdW5jQXJnXG4gICAgLnN1YnN0cmluZyhlbmQgKyAxLCBmdW5jQXJnLmxlbmd0aClcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KCcsICcpXG4gIGFyZ3MudW5zaGlmdChhcmcudHJpbSgpKVxuICByZXR1cm4gYXJnc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQYXJhbWV0ZXJzKHA6IHN0cmluZyk6IEFycmF5PEdvUGFyYW0+IHtcbiAgaWYgKCFwIHx8IHAudHJpbSgpID09PSAnJykge1xuICAgIHJldHVybiBbXVxuICB9XG4gIGxldCBhcmdzOiBBcnJheTxzdHJpbmc+ID0gcC5zcGxpdCgvLCAvKVxuICBjb25zdCByZXN1bHQ6IEFycmF5PEdvUGFyYW0+ID0gW11cbiAgbGV0IG1vcmUgPSB0cnVlXG4gIHdoaWxlIChtb3JlKSB7XG4gICAgYXJncyA9IGVuc3VyZU5leHRBcmcoYXJncylcbiAgICBpZiAoIWFyZ3MgfHwgYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgIG1vcmUgPSBmYWxzZVxuICAgICAgY29udGludWVcbiAgICB9XG4gICAgY29uc3QgYXJnID0gYXJncy5zaGlmdCgpXG5cbiAgICBsZXQgdHlwZSA9IHBhcnNlVHlwZShhcmcpXG4gICAgaWYgKHR5cGUuaXNGdW5jKSB7XG4gICAgICByZXN1bHQucHVzaCh7IG5hbWU6IGFyZywgaWRlbnRpZmllcjogJycsIHR5cGUgfSlcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGlmICghYXJnLmluY2x1ZGVzKCcgJykpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHsgbmFtZTogYXJnLCBpZGVudGlmaWVyOiAnJywgdHlwZSB9KVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCBzcGxpdCA9IGFyZy5zcGxpdCgnICcpXG4gICAgaWYgKCFzcGxpdCB8fCBzcGxpdC5sZW5ndGggPCAyKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGxldCBpZGVudGlmaWVyID0gc3BsaXQuc2hpZnQoKVxuICAgIHR5cGUgPSBwYXJzZVR5cGUoc3BsaXQuam9pbignICcpKVxuICAgIHJlc3VsdC5wdXNoKHsgbmFtZTogYXJnLCBpZGVudGlmaWVyLCB0eXBlIH0pXG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGdyYWRlVG9GdW5jU3VnZ2VzdGlvbihcbiAgY3R4OiBDdHgsXG4gIHN1Z2dlc3Rpb246IFN1Z2dlc3Rpb24sXG4gIGM6IEdvQ29kZVN1Z2dlc3Rpb25cbik6IEZ1enp5U3VnZ2VzdGlvbiB7XG4gIGlmICghYy50eXBlIHx8ICFjLnR5cGUuaW5jbHVkZXMoJ2Z1bmMoJykpIHtcbiAgICByZXR1cm4geyAuLi5zdWdnZXN0aW9uIH1cbiAgfVxuICBjb25zdCB0eXBlID0gcGFyc2VUeXBlKGMudHlwZSlcbiAgaWYgKCF0eXBlLmlzRnVuYykge1xuICAgIHJldHVybiB7IC4uLnN1Z2dlc3Rpb24sIGxlZnRMYWJlbDogJycgfVxuICB9XG5cbiAgbGV0IHNuaXBwZXQsIGRpc3BsYXlUZXh0XG5cbiAgaWYgKGMuY2xhc3MgPT09ICd0eXBlJykge1xuICAgIGNvbnN0IHIgPSBmdW5jU25pcHBldChjdHgsIHR5cGUpXG4gICAgc25pcHBldCA9IGMubmFtZSArICcoJyArIHIuc25pcHBldCArICcpJ1xuICAgIGRpc3BsYXlUZXh0ID0gYy5uYW1lXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgciA9IGdlbmVyYXRlU25pcHBldChjdHgsIGMubmFtZSwgdHlwZSlcbiAgICBzbmlwcGV0ID0gci5zbmlwcGV0XG4gICAgZGlzcGxheVRleHQgPSByLmRpc3BsYXlUZXh0XG5cbiAgICBzdWdnZXN0aW9uLmxlZnRMYWJlbCA9IGZ1bmNSZXR1cm5TbmlwcGV0KGN0eCwgdHlwZSkuZGlzcGxheVRleHRcbiAgfVxuXG4gIHNuaXBwZXQgKz0gJyQwJ1xuICBpZiAoY3R4LnNuaXBwZXRNb2RlID09PSAnbm9uZScpIHtcbiAgICAvLyB1c2VyIGRvZXNuJ3QgY2FyZSBhYm91dCBhcmcgbmFtZXMvdHlwZXNcbiAgICBzbmlwcGV0ID0gYy5uYW1lICsgJygkMSkkMCdcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgLi4uc3VnZ2VzdGlvbixcbiAgICBzbmlwcGV0LFxuICAgIGRpc3BsYXlUZXh0LFxuICAgIGZ1enp5TWF0Y2g6IGMubmFtZVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmdW5jU25pcHBldChjdHg6IEN0eCwgdHlwZTogR29GdW5jVHlwZSk6IFNuaXBwZXQge1xuICBjb25zdCBhcmdTbmlwcGV0cyA9IHR5cGUuYXJncy5tYXAoYXJnID0+IGZ1bmNBcmdTbmlwcGV0KGN0eCwgYXJnKSlcblxuICBsZXQgc25pcHBldCA9ICdmdW5jKCcgKyBhcmdTbmlwcGV0cy5tYXAocyA9PiBzLnNuaXBwZXQpLmpvaW4oJywgJykgKyAnKSdcbiAgbGV0IGRpc3BsYXlUZXh0ID1cbiAgICAnZnVuYygnICsgYXJnU25pcHBldHMubWFwKHMgPT4gcy5kaXNwbGF5VGV4dCkuam9pbignLCAnKSArICcpJ1xuXG4gIGNvbnN0IHIgPSBmdW5jUmV0dXJuU25pcHBldChjdHgsIHR5cGUpXG4gIHNuaXBwZXQgKz0gci5zbmlwcGV0ID8gJyAnICsgci5zbmlwcGV0IDogJydcbiAgZGlzcGxheVRleHQgKz0gci5kaXNwbGF5VGV4dCA/ICcgJyArIHIuZGlzcGxheVRleHQgOiAnJ1xuXG4gIGN0eC5zbmlwQ291bnQrK1xuICBzbmlwcGV0ICs9ICcge1xcblxcdCQnICsgY3R4LnNuaXBDb3VudCArICdcXG5cXFxcfSdcblxuICByZXR1cm4geyBzbmlwcGV0LCBkaXNwbGF5VGV4dCB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbm9ueW1vdXNGdW5jU25pcHBldChjdHg6IEN0eCwgdHlwZTogR29GdW5jVHlwZSk6IFNuaXBwZXQge1xuICAvLyBHZW5lcmF0ZSBhbiBhbm9ueW1vdXMgZnVuY1xuICBjdHguc25pcENvdW50KytcbiAgY29uc3Qgc25pcCA9IGN0eC5zbmlwQ291bnRcblxuICBjb25zdCByID0gZnVuY1NuaXBwZXQoY3R4LCB0eXBlKVxuXG4gIHJldHVybiB7XG4gICAgc25pcHBldDogJyR7JyArIHNuaXAgKyAnOicgKyByLnNuaXBwZXQgKyAnfScsXG4gICAgZGlzcGxheVRleHQ6IHIuZGlzcGxheVRleHRcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZnVuY0FyZ1NuaXBwZXQoY3R4OiBDdHgsIHBhcmFtOiBHb1BhcmFtKTogU25pcHBldCB7XG4gIGxldCBhcmdUZXh0ID0gJydcbiAgaWYgKHBhcmFtLmlkZW50aWZpZXIpIHtcbiAgICBhcmdUZXh0ID0gcGFyYW0uaWRlbnRpZmllciArICcnXG4gIH0gZWxzZSB7XG4gICAgY3R4LmFyZ0NvdW50KytcbiAgICBhcmdUZXh0ID0gJ2FyZycgKyBjdHguYXJnQ291bnQgKyAnJ1xuICB9XG5cbiAgY3R4LnNuaXBDb3VudCsrXG4gIGxldCBzbmlwcGV0ID0gJyR7JyArIGN0eC5zbmlwQ291bnQgKyAnOicgKyBhcmdUZXh0ICsgJ30gJ1xuICBsZXQgZGlzcGxheVRleHQgPSBhcmdUZXh0ICsgJyAnXG5cbiAgaWYgKHBhcmFtLnR5cGUuaXNGdW5jKSB7XG4gICAgY29uc3QgciA9IGFub255bW91c0Z1bmNTbmlwcGV0KGN0eCwgcGFyYW0udHlwZSlcbiAgICBzbmlwcGV0ICs9IHIuc25pcHBldFxuICAgIGRpc3BsYXlUZXh0ICs9IHIuZGlzcGxheVRleHRcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB7IG5hbWUgfSA9IHBhcmFtLnR5cGVcbiAgICBzbmlwcGV0ICs9IGVzY2FwZUN1cmxpZXMobmFtZSlcbiAgICBkaXNwbGF5VGV4dCArPSBuYW1lXG4gIH1cblxuICByZXR1cm4geyBzbmlwcGV0LCBkaXNwbGF5VGV4dCB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmdW5jUmV0dXJuU25pcHBldChjdHg6IEN0eCwgdHlwZTogR29GdW5jVHlwZSk6IFNuaXBwZXQge1xuICBjb25zdCByZXN1bHRzID0gdHlwZS5yZXR1cm5zLm1hcChyID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgc25pcHBldDogZXNjYXBlQ3VybGllcyhyLnR5cGUubmFtZSksXG4gICAgICBkaXNwbGF5VGV4dDogci5uYW1lXG4gICAgfVxuICB9KVxuXG4gIGxldCBzbmlwcGV0ID0gcmVzdWx0cy5tYXAociA9PiByLnNuaXBwZXQpLmpvaW4oJywgJylcbiAgbGV0IGRpc3BsYXlUZXh0ID0gcmVzdWx0cy5tYXAociA9PiByLmRpc3BsYXlUZXh0KS5qb2luKCcsICcpXG5cbiAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMSkge1xuICAgIHNuaXBwZXQgPSAnKCcgKyBzbmlwcGV0ICsgJyknXG4gICAgZGlzcGxheVRleHQgPSAnKCcgKyBkaXNwbGF5VGV4dCArICcpJ1xuICB9XG4gIHJldHVybiB7IHNuaXBwZXQsIGRpc3BsYXlUZXh0IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU25pcHBldChcbiAgY3R4OiBDdHgsXG4gIG5hbWU6IHN0cmluZyxcbiAgdHlwZTogR29GdW5jVHlwZVxuKTogU25pcHBldCB7XG4gIGNvbnN0IHJlc3VsdHMgPSB0eXBlLmFyZ3MubWFwKChhcmcsIGkpID0+IHtcbiAgICBpZiAoYXJnLnR5cGUuaXNGdW5jKSB7XG4gICAgICByZXR1cm4gYW5vbnltb3VzRnVuY1NuaXBwZXQoY3R4LCBhcmcudHlwZSlcbiAgICB9XG5cbiAgICAvLyBvbWl0IHZhcmlhZGljIGFyZ3VtZW50c1xuICAgIGNvbnN0IGdlbmVyYXRlQXJnU25pcHBldCA9ICEoXG4gICAgICBpID09PSB0eXBlLmFyZ3MubGVuZ3RoIC0gMSAmJiBhcmcudHlwZS5uYW1lLnN0YXJ0c1dpdGgoJy4uLicpXG4gICAgKVxuICAgIGxldCBzbmlwcGV0ID0gbnVsbFxuICAgIGlmIChnZW5lcmF0ZUFyZ1NuaXBwZXQpIHtcbiAgICAgIGxldCBhcmdUZXh0ID0gYXJnLm5hbWVcbiAgICAgIGlmIChjdHguc25pcHBldE1vZGUgPT09ICduYW1lJyAmJiBhcmcuaWRlbnRpZmllcikge1xuICAgICAgICBhcmdUZXh0ID0gYXJnLmlkZW50aWZpZXJcbiAgICAgIH1cbiAgICAgIGFyZ1RleHQgPSBlc2NhcGVDdXJsaWVzKGFyZ1RleHQpXG4gICAgICBjdHguc25pcENvdW50KytcbiAgICAgIHNuaXBwZXQgPSAnJHsnICsgY3R4LnNuaXBDb3VudCArICc6JyArIGFyZ1RleHQgKyAnfSdcbiAgICB9XG4gICAgcmV0dXJuIHsgc25pcHBldCwgZGlzcGxheVRleHQ6IGFyZy5uYW1lIH1cbiAgfSlcblxuICBsZXQgc25pcHBldCA9IHJlc3VsdHNcbiAgICAubWFwKHIgPT4gci5zbmlwcGV0KVxuICAgIC5maWx0ZXIociA9PiByICE9PSBudWxsKVxuICAgIC5qb2luKCcsICcpXG4gIGxldCBkaXNwbGF5VGV4dCA9IHJlc3VsdHMubWFwKHIgPT4gci5kaXNwbGF5VGV4dCkuam9pbignLCAnKVxuXG4gIHNuaXBwZXQgPSBuYW1lICsgJygnICsgc25pcHBldCArICcpJ1xuICBkaXNwbGF5VGV4dCA9IG5hbWUgKyAnKCcgKyBkaXNwbGF5VGV4dCArICcpJ1xuXG4gIHJldHVybiB7IHNuaXBwZXQsIGRpc3BsYXlUZXh0IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvU3VnZ2VzdGlvbihcbiAgYzogR29Db2RlU3VnZ2VzdGlvbixcbiAgb3B0aW9uczogT3B0aW9uc1xuKTogU3VnZ2VzdGlvbiB7XG4gIGxldCBzdWdnZXN0aW9uOiBGdXp6eVN1Z2dlc3Rpb24gPSB7XG4gICAgcmVwbGFjZW1lbnRQcmVmaXg6IG9wdGlvbnMucHJlZml4LFxuICAgIGxlZnRMYWJlbDogYy50eXBlIHx8IGMuY2xhc3MsXG4gICAgdHlwZTogdHJhbnNsYXRlVHlwZShjLmNsYXNzKVxuICB9XG4gIGNvbnN0IGlzRnVuY1R5cGUgPVxuICAgIGMuY2xhc3MgPT09ICdmdW5jJyB8fCAoYy5jbGFzcyA9PT0gJ3R5cGUnICYmIGMudHlwZS5pbmNsdWRlcygnZnVuYygnKSlcbiAgaWYgKGlzRnVuY1R5cGUgJiYgb3B0aW9ucy5zdWZmaXggIT09ICcoJykge1xuICAgIGNvbnN0IGN0eDogQ3R4ID0ge1xuICAgICAgc25pcENvdW50OiAwLFxuICAgICAgYXJnQ291bnQ6IDAsXG4gICAgICBzbmlwcGV0TW9kZTogb3B0aW9ucy5zbmlwcGV0TW9kZVxuICAgIH1cbiAgICBzdWdnZXN0aW9uID0gdXBncmFkZVRvRnVuY1N1Z2dlc3Rpb24oY3R4LCBzdWdnZXN0aW9uLCBjKVxuICB9IGVsc2Uge1xuICAgIHN1Z2dlc3Rpb24udGV4dCA9IGMubmFtZVxuICAgIHN1Z2dlc3Rpb24uZnV6enlNYXRjaCA9IHN1Z2dlc3Rpb24udGV4dFxuICB9XG4gIGlmIChzdWdnZXN0aW9uLnR5cGUgPT09ICdwYWNrYWdlJykge1xuICAgIHN1Z2dlc3Rpb24uaWNvbkhUTUwgPSAnPGkgY2xhc3M9XCJpY29uLXBhY2thZ2VcIj48L2k+J1xuICB9XG4gIHJldHVybiBzdWdnZXN0aW9uXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b1N1Z2dlc3Rpb25zKFxuICBjYW5kaWRhdGVzOiBHb0NvZGVTdWdnZXN0aW9uW10sXG4gIG9wdGlvbnM6IE9wdGlvbnNcbik6IFN1Z2dlc3Rpb25bXSB7XG4gIHJldHVybiBjYW5kaWRhdGVzLm1hcChjID0+IHRvU3VnZ2VzdGlvbihjLCBvcHRpb25zKSlcbn1cblxuY29uc3QgcmVnZXhDdXJseSA9IC97fS9nXG5mdW5jdGlvbiBlc2NhcGVDdXJsaWVzKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4Q3VybHksICd7XFxcXH0nKVxufVxuIl19