(function() {
  var BLOCKQUOTE_REGEX, LIST_AL_REGEX, LIST_AL_TASK_REGEX, LIST_OL_REGEX, LIST_OL_TASK_REGEX, LIST_UL_REGEX, LIST_UL_TASK_REGEX, LineMeta, TYPES, incStr, utils;

  utils = require("../utils");

  LIST_UL_TASK_REGEX = /^(\s*)([*+-\.])\s+\[[xX ]\](?:\s+(.*))?$/;

  LIST_UL_REGEX = /^(\s*)([*+-\.])(?:\s+(.*))?$/;

  LIST_OL_TASK_REGEX = /^(\s*)(\d+)([\.\)])\s+\[[xX ]\](?:\s+(.*))?$/;

  LIST_OL_REGEX = /^(\s*)(\d+)([\.\)])(?:\s+(.*))?$/;

  LIST_AL_TASK_REGEX = /^(\s*)([a-zA-Z]{1,2})([\.\)])\s+\[[xX ]\](?:\s+(.*))?$/;

  LIST_AL_REGEX = /^(\s*)([a-zA-Z]{1,2})([\.\)])(?:\s+(.*))?$/;

  BLOCKQUOTE_REGEX = /^(\s*)(>)(?:\s+(.*))?$/;

  incStr = function(str) {
    var num;
    num = parseInt(str, 10);
    if (isNaN(num)) {
      return utils.incrementChars(str);
    } else {
      return num + 1;
    }
  };

  TYPES = [
    {
      name: ["list", "ul", "task"],
      regex: LIST_UL_TASK_REGEX,
      lineHead: function(m) {
        return "" + m.indent + m.head + " [ ] ";
      },
      nextLine: function(m) {
        return "" + m.indent + m.head + " [ ] ";
      },
      nextIndent: function(m) {
        return m.head.length + 1;
      },
      defaultHead: function(head) {
        return head;
      }
    }, {
      name: ["list", "ul"],
      regex: LIST_UL_REGEX,
      lineHead: function(m) {
        return "" + m.indent + m.head + " ";
      },
      nextLine: function(m) {
        return "" + m.indent + m.head + " ";
      },
      nextIndent: function(m) {
        return m.head.length + 1;
      },
      defaultHead: function(head) {
        return head;
      }
    }, {
      name: ["list", "ol", "task"],
      regex: LIST_OL_TASK_REGEX,
      lineHead: function(m) {
        return "" + m.indent + m.head + m.suffix + " [ ] ";
      },
      nextLine: function(m) {
        return "" + m.indent + (incStr(m.head)) + m.suffix + " [ ] ";
      },
      nextIndent: function(m) {
        return m.head.length + m.suffix.length + 1;
      },
      defaultHead: function(head) {
        return "1";
      }
    }, {
      name: ["list", "ol"],
      regex: LIST_OL_REGEX,
      lineHead: function(m) {
        return "" + m.indent + m.head + m.suffix + " ";
      },
      nextLine: function(m) {
        return "" + m.indent + (incStr(m.head)) + m.suffix + " ";
      },
      nextIndent: function(m) {
        return m.head.length + m.suffix.length + 1;
      },
      defaultHead: function(head) {
        return "1";
      }
    }, {
      name: ["list", "ol", "al", "task"],
      regex: LIST_AL_TASK_REGEX,
      lineHead: function(m) {
        return "" + m.indent + m.head + m.suffix + " [ ] ";
      },
      nextLine: function(m) {
        return "" + m.indent + (incStr(m.head)) + m.suffix + " [ ] ";
      },
      nextIndent: function(m) {
        return m.head.length + m.suffix.length + 1;
      },
      defaultHead: function(head) {
        var c;
        c = utils.isUpperCase(head) ? "A" : "a";
        return head.replace(/./g, c);
      }
    }, {
      name: ["list", "ol", "al"],
      regex: LIST_AL_REGEX,
      lineHead: function(m) {
        return "" + m.indent + m.head + m.suffix + " ";
      },
      nextLine: function(m) {
        return "" + m.indent + (incStr(m.head)) + m.suffix + " ";
      },
      nextIndent: function(m) {
        return m.head.length + m.suffix.length + 1;
      },
      defaultHead: function(head) {
        var c;
        c = utils.isUpperCase(head) ? "A" : "a";
        return head.replace(/./g, c);
      }
    }, {
      name: ["blockquote"],
      regex: BLOCKQUOTE_REGEX,
      lineHead: function(m) {
        return m.indent + "> ";
      },
      nextLine: function(m) {
        return m.indent + "> ";
      },
      nextIndent: function(m) {
        return 2;
      },
      defaultHead: function(head) {
        return ">";
      }
    }
  ];

  module.exports = LineMeta = (function() {
    function LineMeta(line) {
      this.line = line;
      this.type = void 0;
      this.head = "";
      this.defaultHead = "";
      this.body = "";
      this.indent = "";
      this.nextLine = "";
      this._findMeta();
    }

    LineMeta.prototype._findMeta = function() {
      var i, len, matches, results, type;
      results = [];
      for (i = 0, len = TYPES.length; i < len; i++) {
        type = TYPES[i];
        if (matches = type.regex.exec(this.line)) {
          this.type = type;
          this.indent = matches[1];
          this.head = matches[2];
          this.defaultHead = type.defaultHead(matches[2]);
          this.suffix = matches.length >= 4 ? matches[3] : "";
          this.body = matches[matches.length - 1] || "";
          this.nextLine = type.nextLine(this);
          break;
        } else {
          results.push(void 0);
        }
      }
      return results;
    };

    LineMeta.prototype.lineHead = function(head) {
      return this.type.lineHead({
        indent: this.indent,
        head: head,
        suffix: this.suffix
      });
    };

    LineMeta.prototype.indentLineTabText = function() {
      return " ".repeat(this.indentLineTabLength());
    };

    LineMeta.prototype.indentLineTabLength = function() {
      return this.type.nextIndent(this);
    };

    LineMeta.prototype.isTaskList = function() {
      return !!this.type && this.type.name.indexOf("task") !== -1;
    };

    LineMeta.prototype.isList = function(type) {
      return !!this.type && this.type.name.indexOf("list") !== -1 && (!type || this.type.name.indexOf(type) !== -1);
    };

    LineMeta.prototype.isContinuous = function() {
      return !!this.nextLine;
    };

    LineMeta.prototype.isEmptyBody = function() {
      return !this.body;
    };

    LineMeta.prototype.isIndented = function() {
      return !!this.indent && this.indent.length > 0;
    };

    LineMeta.isList = function(line) {
      return LIST_UL_REGEX.test(line) || LIST_OL_REGEX.test(line) || LIST_AL_REGEX.test(line);
    };

    LineMeta.isOrderedList = function(line) {
      return LIST_OL_REGEX.test(line) || LIST_AL_REGEX.test(line);
    };

    LineMeta.isUnorderedList = function(line) {
      return LIST_UL_REGEX.test(line);
    };

    LineMeta.incStr = incStr;

    return LineMeta;

  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvbXl1Z2EvLmF0b20vcGFja2FnZXMvbWFya2Rvd24td3JpdGVyL2xpYi9oZWxwZXJzL2xpbmUtbWV0YS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBOztFQUFBLEtBQUEsR0FBUSxPQUFBLENBQVEsVUFBUjs7RUFFUixrQkFBQSxHQUFxQjs7RUFDckIsYUFBQSxHQUFxQjs7RUFDckIsa0JBQUEsR0FBcUI7O0VBQ3JCLGFBQUEsR0FBcUI7O0VBQ3JCLGtCQUFBLEdBQXFCOztFQUNyQixhQUFBLEdBQXFCOztFQUNyQixnQkFBQSxHQUFxQjs7RUFFckIsTUFBQSxHQUFTLFNBQUMsR0FBRDtBQUNQLFFBQUE7SUFBQSxHQUFBLEdBQU0sUUFBQSxDQUFTLEdBQVQsRUFBYyxFQUFkO0lBQ04sSUFBRyxLQUFBLENBQU0sR0FBTixDQUFIO2FBQW1CLEtBQUssQ0FBQyxjQUFOLENBQXFCLEdBQXJCLEVBQW5CO0tBQUEsTUFBQTthQUNLLEdBQUEsR0FBTSxFQURYOztFQUZPOztFQUtULEtBQUEsR0FBUTtJQUNOO01BQ0UsSUFBQSxFQUFNLENBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxNQUFmLENBRFI7TUFFRSxLQUFBLEVBQU8sa0JBRlQ7TUFHRSxRQUFBLEVBQVUsU0FBQyxDQUFEO2VBQU8sRUFBQSxHQUFHLENBQUMsQ0FBQyxNQUFMLEdBQWMsQ0FBQyxDQUFDLElBQWhCLEdBQXFCO01BQTVCLENBSFo7TUFJRSxRQUFBLEVBQVUsU0FBQyxDQUFEO2VBQU8sRUFBQSxHQUFHLENBQUMsQ0FBQyxNQUFMLEdBQWMsQ0FBQyxDQUFDLElBQWhCLEdBQXFCO01BQTVCLENBSlo7TUFLRSxVQUFBLEVBQVksU0FBQyxDQUFEO2VBQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFQLEdBQWdCO01BQXZCLENBTGQ7TUFNRSxXQUFBLEVBQWEsU0FBQyxJQUFEO2VBQVU7TUFBVixDQU5mO0tBRE0s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QixDQUFBLElBQTRCLGFBQWEsQ0FBQyxJQUFkLENBQW1CLElBQW5CLENBQTVCLElBQXdELGFBQWEsQ0FBQyxJQUFkLENBQW1CLElBQW5CO0lBQWxFOztJQUNULFFBQUMsQ0FBQSxhQUFELEdBQWdCLFNBQUMsSUFBRDthQUFVLGFBQWEsQ0FBQyxJQUFkLENBQW1CLElBQW5CLENBQUEsSUFBNEIsYUFBYSxDQUFDLElBQWQsQ0FBbUIsSUFBbkI7SUFBdEM7O0lBQ2hCLFFBQUMsQ0FBQSxlQUFELEdBQWtCLFNBQUMsSUFBRDthQUFVLGFBQWEsQ0FBQyxJQUFkLENBQW1CLElBQW5CO0lBQVY7O0lBQ2xCLFFBQUMsQ0FBQSxNQUFELEdBQVM7Ozs7O0FBeEhYIiwic291cmNlc0NvbnRlbnQiOlsidXRpbHMgPSByZXF1aXJlIFwiLi4vdXRpbHNcIlxuXG5MSVNUX1VMX1RBU0tfUkVHRVggPSAvLy8gXiAoXFxzKikgKFsqKy1cXC5dKSBcXHMrIFxcW1t4WFxcIF1cXF0gKD86XFxzKyAoLiopKT8gJCAvLy9cbkxJU1RfVUxfUkVHRVggICAgICA9IC8vLyBeIChcXHMqKSAoWyorLVxcLl0pICg/OlxccysgKC4qKSk/ICQgLy8vXG5MSVNUX09MX1RBU0tfUkVHRVggPSAvLy8gXiAoXFxzKikgKFxcZCspKFtcXC5cXCldKSBcXHMrIFxcW1t4WFxcIF1cXF0gKD86XFxzKyAoLiopKT8gJCAvLy9cbkxJU1RfT0xfUkVHRVggICAgICA9IC8vLyBeIChcXHMqKSAoXFxkKykoW1xcLlxcKV0pICg/OlxccysgKC4qKSk/ICQgLy8vXG5MSVNUX0FMX1RBU0tfUkVHRVggPSAvLy8gXiAoXFxzKikgKFthLXpBLVpdezEsMn0pKFtcXC5cXCldKSBcXHMrIFxcW1t4WFxcIF1cXF0gKD86XFxzKyAoLiopKT8gJCAvLy9cbkxJU1RfQUxfUkVHRVggICAgICA9IC8vLyBeIChcXHMqKSAoW2EtekEtWl17MSwyfSkoW1xcLlxcKV0pICg/OlxccysgKC4qKSk/ICQgLy8vXG5CTE9DS1FVT1RFX1JFR0VYICAgPSAvLy8gXiAoXFxzKikgKD4pICg/OlxccysgKC4qKSk/ICQgLy8vXG5cbmluY1N0ciA9IChzdHIpIC0+XG4gIG51bSA9IHBhcnNlSW50KHN0ciwgMTApXG4gIGlmIGlzTmFOKG51bSkgdGhlbiB1dGlscy5pbmNyZW1lbnRDaGFycyhzdHIpXG4gIGVsc2UgbnVtICsgMVxuXG5UWVBFUyA9IFtcbiAge1xuICAgIG5hbWU6IFtcImxpc3RcIiwgXCJ1bFwiLCBcInRhc2tcIl0sXG4gICAgcmVnZXg6IExJU1RfVUxfVEFTS19SRUdFWCxcbiAgICBsaW5lSGVhZDogKG0pIC0+IFwiI3ttLmluZGVudH0je20uaGVhZH0gWyBdIFwiXG4gICAgbmV4dExpbmU6IChtKSAtPiBcIiN7bS5pbmRlbnR9I3ttLmhlYWR9IFsgXSBcIlxuICAgIG5leHRJbmRlbnQ6IChtKSAtPiBtLmhlYWQubGVuZ3RoICsgMVxuICAgIGRlZmF1bHRIZWFkOiAoaGVhZCkgLT4gaGVhZFxuICB9XG4gIHtcbiAgICBuYW1lOiBbXCJsaXN0XCIsIFwidWxcIl0sXG4gICAgcmVnZXg6IExJU1RfVUxfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChtKSAtPiBcIiN7bS5pbmRlbnR9I3ttLmhlYWR9IFwiXG4gICAgbmV4dExpbmU6IChtKSAtPiBcIiN7bS5pbmRlbnR9I3ttLmhlYWR9IFwiXG4gICAgbmV4dEluZGVudDogKG0pIC0+IG0uaGVhZC5sZW5ndGggKyAxXG4gICAgZGVmYXVsdEhlYWQ6IChoZWFkKSAtPiBoZWFkXG4gIH1cbiAge1xuICAgIG5hbWU6IFtcImxpc3RcIiwgXCJvbFwiLCBcInRhc2tcIl0sXG4gICAgcmVnZXg6IExJU1RfT0xfVEFTS19SRUdFWCxcbiAgICBsaW5lSGVhZDogKG0pIC0+IFwiI3ttLmluZGVudH0je20uaGVhZH0je20uc3VmZml4fSBbIF0gXCJcbiAgICBuZXh0TGluZTogKG0pIC0+IFwiI3ttLmluZGVudH0je2luY1N0cihtLmhlYWQpfSN7bS5zdWZmaXh9IFsgXSBcIlxuICAgIG5leHRJbmRlbnQ6IChtKSAtPiBtLmhlYWQubGVuZ3RoICsgbS5zdWZmaXgubGVuZ3RoICsgMVxuICAgIGRlZmF1bHRIZWFkOiAoaGVhZCkgLT4gXCIxXCJcbiAgfVxuICB7XG4gICAgbmFtZTogW1wibGlzdFwiLCBcIm9sXCJdLFxuICAgIHJlZ2V4OiBMSVNUX09MX1JFR0VYLFxuICAgIGxpbmVIZWFkOiAobSkgLT4gXCIje20uaW5kZW50fSN7bS5oZWFkfSN7bS5zdWZmaXh9IFwiXG4gICAgbmV4dExpbmU6IChtKSAtPiBcIiN7bS5pbmRlbnR9I3tpbmNTdHIobS5oZWFkKX0je20uc3VmZml4fSBcIlxuICAgIG5leHRJbmRlbnQ6IChtKSAtPiBtLmhlYWQubGVuZ3RoICsgbS5zdWZmaXgubGVuZ3RoICsgMVxuICAgIGRlZmF1bHRIZWFkOiAoaGVhZCkgLT4gXCIxXCJcbiAgfVxuICB7XG4gICAgbmFtZTogW1wibGlzdFwiLCBcIm9sXCIsIFwiYWxcIiwgXCJ0YXNrXCJdLFxuICAgIHJlZ2V4OiBMSVNUX0FMX1RBU0tfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChtKSAtPiBcIiN7bS5pbmRlbnR9I3ttLmhlYWR9I3ttLnN1ZmZpeH0gWyBdIFwiXG4gICAgbmV4dExpbmU6IChtKSAtPiBcIiN7bS5pbmRlbnR9I3tpbmNTdHIobS5oZWFkKX0je20uc3VmZml4fSBbIF0gXCJcbiAgICBuZXh0SW5kZW50OiAobSkgLT4gbS5oZWFkLmxlbmd0aCArIG0uc3VmZml4Lmxlbmd0aCArIDFcbiAgICBkZWZhdWx0SGVhZDogKGhlYWQpIC0+XG4gICAgICBjID0gaWYgdXRpbHMuaXNVcHBlckNhc2UoaGVhZCkgdGhlbiBcIkFcIiBlbHNlIFwiYVwiXG4gICAgICBoZWFkLnJlcGxhY2UoLy4vZywgYylcbiAgfVxuICB7XG4gICAgbmFtZTogW1wibGlzdFwiLCBcIm9sXCIsIFwiYWxcIl0sXG4gICAgcmVnZXg6IExJU1RfQUxfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChtKSAtPiBcIiN7bS5pbmRlbnR9I3ttLmhlYWR9I3ttLnN1ZmZpeH0gXCJcbiAgICBuZXh0TGluZTogKG0pIC0+IFwiI3ttLmluZGVudH0je2luY1N0cihtLmhlYWQpfSN7bS5zdWZmaXh9IFwiXG4gICAgbmV4dEluZGVudDogKG0pIC0+IG0uaGVhZC5sZW5ndGggKyBtLnN1ZmZpeC5sZW5ndGggKyAxXG4gICAgZGVmYXVsdEhlYWQ6IChoZWFkKSAtPlxuICAgICAgYyA9IGlmIHV0aWxzLmlzVXBwZXJDYXNlKGhlYWQpIHRoZW4gXCJBXCIgZWxzZSBcImFcIlxuICAgICAgaGVhZC5yZXBsYWNlKC8uL2csIGMpXG4gIH1cbiAge1xuICAgIG5hbWU6IFtcImJsb2NrcXVvdGVcIl0sXG4gICAgcmVnZXg6IEJMT0NLUVVPVEVfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChtKSAtPiBcIiN7bS5pbmRlbnR9PiBcIlxuICAgIG5leHRMaW5lOiAobSkgLT4gXCIje20uaW5kZW50fT4gXCJcbiAgICBuZXh0SW5kZW50OiAobSkgLT4gMlxuICAgIGRlZmF1bHRIZWFkOiAoaGVhZCkgLT4gXCI+XCJcbiAgfVxuXVxuXG5tb2R1bGUuZXhwb3J0cyA9XG5jbGFzcyBMaW5lTWV0YVxuICBjb25zdHJ1Y3RvcjogKGxpbmUpIC0+XG4gICAgQGxpbmUgPSBsaW5lXG4gICAgQHR5cGUgPSB1bmRlZmluZWRcbiAgICBAaGVhZCA9IFwiXCJcbiAgICBAZGVmYXVsdEhlYWQgPSBcIlwiXG4gICAgQGJvZHkgPSBcIlwiXG4gICAgQGluZGVudCA9IFwiXCJcbiAgICBAbmV4dExpbmUgPSBcIlwiXG5cbiAgICBAX2ZpbmRNZXRhKClcblxuICBfZmluZE1ldGE6IC0+XG4gICAgZm9yIHR5cGUgaW4gVFlQRVNcbiAgICAgIGlmIG1hdGNoZXMgPSB0eXBlLnJlZ2V4LmV4ZWMoQGxpbmUpXG4gICAgICAgIEB0eXBlID0gdHlwZVxuICAgICAgICBAaW5kZW50ID0gbWF0Y2hlc1sxXVxuICAgICAgICBAaGVhZCA9IG1hdGNoZXNbMl1cbiAgICAgICAgQGRlZmF1bHRIZWFkID0gdHlwZS5kZWZhdWx0SGVhZChtYXRjaGVzWzJdKVxuICAgICAgICBAc3VmZml4ID0gaWYgbWF0Y2hlcy5sZW5ndGggPj0gNCB0aGVuIG1hdGNoZXNbM10gZWxzZSBcIlwiXG4gICAgICAgIEBib2R5ID0gbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aC0xXSB8fCBcIlwiXG4gICAgICAgIEBuZXh0TGluZSA9IHR5cGUubmV4dExpbmUoQClcbiAgICAgICAgYnJlYWtcblxuICBsaW5lSGVhZDogKGhlYWQpIC0+IEB0eXBlLmxpbmVIZWFkKHsgaW5kZW50OiBAaW5kZW50LCBoZWFkOiBoZWFkLCBzdWZmaXg6IEBzdWZmaXggfSlcblxuICAjIElmIGxpbmUgdG8gYmUgaW5kZW50ZWRcbiAgaW5kZW50TGluZVRhYlRleHQ6IC0+IFwiIFwiLnJlcGVhdChAaW5kZW50TGluZVRhYkxlbmd0aCgpKVxuICBpbmRlbnRMaW5lVGFiTGVuZ3RoOiAtPiBAdHlwZS5uZXh0SW5kZW50KEApXG5cbiAgIyBDaGVja3NcbiAgaXNUYXNrTGlzdDogLT4gISFAdHlwZSAmJiBAdHlwZS5uYW1lLmluZGV4T2YoXCJ0YXNrXCIpICE9IC0xXG4gIGlzTGlzdDogKHR5cGUpIC0+ICEhQHR5cGUgJiYgQHR5cGUubmFtZS5pbmRleE9mKFwibGlzdFwiKSAhPSAtMSAmJiAoIXR5cGUgfHwgQHR5cGUubmFtZS5pbmRleE9mKHR5cGUpICE9IC0xKVxuICBpc0NvbnRpbnVvdXM6IC0+ICEhQG5leHRMaW5lXG4gIGlzRW1wdHlCb2R5OiAtPiAhQGJvZHlcbiAgaXNJbmRlbnRlZDogLT4gISFAaW5kZW50ICYmIEBpbmRlbnQubGVuZ3RoID4gMFxuXG4gICMgU3RhdGljIG1ldGhvZHNcbiAgQGlzTGlzdDogKGxpbmUpIC0+IExJU1RfVUxfUkVHRVgudGVzdChsaW5lKSB8fCBMSVNUX09MX1JFR0VYLnRlc3QobGluZSkgfHwgTElTVF9BTF9SRUdFWC50ZXN0KGxpbmUpXG4gIEBpc09yZGVyZWRMaXN0OiAobGluZSkgLT4gTElTVF9PTF9SRUdFWC50ZXN0KGxpbmUpIHx8IExJU1RfQUxfUkVHRVgudGVzdChsaW5lKVxuICBAaXNVbm9yZGVyZWRMaXN0OiAobGluZSkgLT4gTElTVF9VTF9SRUdFWC50ZXN0KGxpbmUpXG4gIEBpbmNTdHI6IGluY1N0clxuIl19
