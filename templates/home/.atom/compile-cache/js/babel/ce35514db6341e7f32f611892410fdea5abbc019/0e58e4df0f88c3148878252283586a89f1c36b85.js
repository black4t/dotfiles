
'use babel';

Object.defineProperty(exports, '__esModule', {
  value: true
});
var promiseWaterfall = function promiseWaterfall(tasks) {
  var p = Promise.resolve();
  var results = [];
  var finalTaskPromise = tasks.reduce(function (prevTaskPromise, task) {
    return prevTaskPromise.then(function (r) {
      if (r) {
        results.push(r);
      }

      return task();
    });
  }, p);

  return finalTaskPromise.then(function (r) {
    if (r) {
      results.push(r);
    }

    return results;
  });
};

exports.promiseWaterfall = promiseWaterfall;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL215dWdhLy5hdG9tL3BhY2thZ2VzL2dvLXBsdXMvbGliL3Byb21pc2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLFdBQVcsQ0FBQTs7Ozs7QUFFWCxJQUFNLGdCQUFnQixHQUFHLFNBQW5CLGdCQUFnQixDQUFJLEtBQUssRUFBOEM7QUFDM0UsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFBO0FBQzNCLE1BQU0sT0FBTyxHQUFHLEVBQUUsQ0FBQTtBQUNsQixNQUFNLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBQyxlQUFlLEVBQUUsSUFBSSxFQUFLO0FBQy9ELFdBQU8sZUFBZSxDQUFDLElBQUksQ0FBQyxVQUFBLENBQUMsRUFBSTtBQUMvQixVQUFJLENBQUMsRUFBRTtBQUNMLGVBQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7T0FDaEI7O0FBRUQsYUFBTyxJQUFJLEVBQUUsQ0FBQTtLQUNkLENBQUMsQ0FBQTtHQUNILEVBQUUsQ0FBQyxDQUFDLENBQUE7O0FBRUwsU0FBTyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsVUFBQSxDQUFDLEVBQUk7QUFDaEMsUUFBSSxDQUFDLEVBQUU7QUFDTCxhQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQ2hCOztBQUVELFdBQU8sT0FBTyxDQUFBO0dBQ2YsQ0FBQyxDQUFBO0NBQ0gsQ0FBQTs7UUFFUSxnQkFBZ0IsR0FBaEIsZ0JBQWdCIiwiZmlsZSI6Ii9ob21lL215dWdhLy5hdG9tL3BhY2thZ2VzL2dvLXBsdXMvbGliL3Byb21pc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuJ3VzZSBiYWJlbCdcblxuY29uc3QgcHJvbWlzZVdhdGVyZmFsbCA9ICh0YXNrczogQXJyYXk8KCkgPT4gUHJvbWlzZTxhbnk+Pik6IFByb21pc2U8YW55PiA9PiB7XG4gIGNvbnN0IHAgPSBQcm9taXNlLnJlc29sdmUoKVxuICBjb25zdCByZXN1bHRzID0gW11cbiAgY29uc3QgZmluYWxUYXNrUHJvbWlzZSA9IHRhc2tzLnJlZHVjZSgocHJldlRhc2tQcm9taXNlLCB0YXNrKSA9PiB7XG4gICAgcmV0dXJuIHByZXZUYXNrUHJvbWlzZS50aGVuKHIgPT4ge1xuICAgICAgaWYgKHIpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHIpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0YXNrKClcbiAgICB9KVxuICB9LCBwKVxuXG4gIHJldHVybiBmaW5hbFRhc2tQcm9taXNlLnRoZW4ociA9PiB7XG4gICAgaWYgKHIpIHtcbiAgICAgIHJlc3VsdHMucHVzaChyKVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzXG4gIH0pXG59XG5cbmV4cG9ydCB7IHByb21pc2VXYXRlcmZhbGwgfVxuIl19