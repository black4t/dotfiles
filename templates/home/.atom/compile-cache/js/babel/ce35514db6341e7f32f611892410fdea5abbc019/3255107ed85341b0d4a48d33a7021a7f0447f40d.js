Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.ranges = ranges;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _atom = require('atom');

function ranges(coverageFile) {
  var data = undefined;
  var ranges = [];
  try {
    data = _fs2['default'].readFileSync(coverageFile, { encoding: 'utf8' });
  } catch (e) {
    return ranges;
  }

  // https://code.google.com/p/go/source/browse/cmd/cover/profile.go?repo=tools&name=a2a0f87c4b38&r=92b0a64343bc62160c1c10d335d375b0defa4c18#113
  var pattern = /^(.+):(\d+).(\d+),(\d+).(\d+) (\d+) (\d+)$/gim;

  var extract = function extract(match) {
    if (!match) {
      return;
    }
    var filePath = match[1];
    var count = match[7];
    var range = new _atom.Range([parseInt(match[2], 10) - 1, parseInt(match[3], 10) - 1], [parseInt(match[4], 10) - 1, parseInt(match[5], 10) - 1]);
    ranges.push({ range: range, count: parseInt(count, 10), file: filePath });
  };

  var match = undefined;
  while ((match = pattern.exec(data)) !== null) {
    extract(match);
  }

  return ranges;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL215dWdhLy5hdG9tL3BhY2thZ2VzL2dvLXBsdXMvbGliL3Rlc3QvZ29jb3Zlci1wYXJzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztrQkFFZSxJQUFJOzs7O29CQUNHLE1BQU07O0FBUXJCLFNBQVMsTUFBTSxDQUFDLFlBQW9CLEVBQXdCO0FBQ2pFLE1BQUksSUFBSSxZQUFBLENBQUE7QUFDUixNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUE7QUFDakIsTUFBSTtBQUNGLFFBQUksR0FBRyxnQkFBRyxZQUFZLENBQUMsWUFBWSxFQUFFLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUE7R0FDM0QsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLFdBQU8sTUFBTSxDQUFBO0dBQ2Q7OztBQUdELE1BQU0sT0FBTyxHQUFHLCtDQUErQyxDQUFBOztBQUUvRCxNQUFNLE9BQU8sR0FBRyxTQUFWLE9BQU8sQ0FBRyxLQUFLLEVBQUk7QUFDdkIsUUFBSSxDQUFDLEtBQUssRUFBRTtBQUNWLGFBQU07S0FDUDtBQUNELFFBQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUN6QixRQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDdEIsUUFBTSxLQUFLLEdBQUcsZ0JBQ1osQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUN4RCxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQ3pELENBQUE7QUFDRCxVQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQTtHQUMxRSxDQUFBOztBQUVELE1BQUksS0FBSyxZQUFBLENBQUE7QUFDVCxTQUFPLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUEsS0FBTSxJQUFJLEVBQUU7QUFDNUMsV0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBO0dBQ2Y7O0FBRUQsU0FBTyxNQUFNLENBQUE7Q0FDZCIsImZpbGUiOiIvaG9tZS9teXVnYS8uYXRvbS9wYWNrYWdlcy9nby1wbHVzL2xpYi90ZXN0L2dvY292ZXItcGFyc2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcblxuaW1wb3J0IGZzIGZyb20gJ2ZzJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICdhdG9tJ1xuXG5leHBvcnQgdHlwZSBDb3ZlcmFnZVJhbmdlID0ge1xuICByYW5nZTogUmFuZ2UsXG4gIGNvdW50OiBudW1iZXIsXG4gIGZpbGU6IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmFuZ2VzKGNvdmVyYWdlRmlsZTogc3RyaW5nKTogQXJyYXk8Q292ZXJhZ2VSYW5nZT4ge1xuICBsZXQgZGF0YVxuICBjb25zdCByYW5nZXMgPSBbXVxuICB0cnkge1xuICAgIGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoY292ZXJhZ2VGaWxlLCB7IGVuY29kaW5nOiAndXRmOCcgfSlcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByYW5nZXNcbiAgfVxuXG4gIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvZ28vc291cmNlL2Jyb3dzZS9jbWQvY292ZXIvcHJvZmlsZS5nbz9yZXBvPXRvb2xzJm5hbWU9YTJhMGY4N2M0YjM4JnI9OTJiMGE2NDM0M2JjNjIxNjBjMWMxMGQzMzVkMzc1YjBkZWZhNGMxOCMxMTNcbiAgY29uc3QgcGF0dGVybiA9IC9eKC4rKTooXFxkKykuKFxcZCspLChcXGQrKS4oXFxkKykgKFxcZCspIChcXGQrKSQvZ2ltXG5cbiAgY29uc3QgZXh0cmFjdCA9IG1hdGNoID0+IHtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgZmlsZVBhdGggPSBtYXRjaFsxXVxuICAgIGNvbnN0IGNvdW50ID0gbWF0Y2hbN11cbiAgICBjb25zdCByYW5nZSA9IG5ldyBSYW5nZShcbiAgICAgIFtwYXJzZUludChtYXRjaFsyXSwgMTApIC0gMSwgcGFyc2VJbnQobWF0Y2hbM10sIDEwKSAtIDFdLFxuICAgICAgW3BhcnNlSW50KG1hdGNoWzRdLCAxMCkgLSAxLCBwYXJzZUludChtYXRjaFs1XSwgMTApIC0gMV1cbiAgICApXG4gICAgcmFuZ2VzLnB1c2goeyByYW5nZTogcmFuZ2UsIGNvdW50OiBwYXJzZUludChjb3VudCwgMTApLCBmaWxlOiBmaWxlUGF0aCB9KVxuICB9XG5cbiAgbGV0IG1hdGNoXG4gIHdoaWxlICgobWF0Y2ggPSBwYXR0ZXJuLmV4ZWMoZGF0YSkpICE9PSBudWxsKSB7XG4gICAgZXh0cmFjdChtYXRjaClcbiAgfVxuXG4gIHJldHVybiByYW5nZXNcbn1cbiJdfQ==