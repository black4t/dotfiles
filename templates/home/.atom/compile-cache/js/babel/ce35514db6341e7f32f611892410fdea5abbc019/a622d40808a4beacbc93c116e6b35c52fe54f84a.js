function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _libProvider = require("../lib/provider");

var _libProvider2 = _interopRequireDefault(_libProvider);

describe("Provider", function () {
  var provider = undefined;

  beforeEach(function () {
    provider = new _libProvider2["default"]();
  });
  afterEach(function () {
    provider.dispose();
  });

  it("emits add event properly", function () {
    var timesTriggered = 0;

    provider.onDidAdd(function (title) {
      if (timesTriggered === 0) {
        expect(title).toEqual({ title: "First", options: undefined });
      } else if (timesTriggered === 1) {
        expect(title).toEqual({ title: "Second", options: undefined });
      } else if (timesTriggered === 2) {
        expect(title).toEqual({ title: "Third", options: undefined });
      } else {
        expect(false).toBe(true);
      }
      timesTriggered++;
    });
    expect(timesTriggered).toBe(0);
    provider.add("First");
    expect(timesTriggered).toBe(1);
    provider.add("Second");
    expect(timesTriggered).toBe(2);
    provider.add("Third");
    expect(timesTriggered).toBe(3);
  });
  it("emits remove event properly", function () {
    var timesTriggered = 0;

    provider.onDidRemove(function (title) {
      if (timesTriggered === 0) {
        expect(title).toBe("First");
      } else if (timesTriggered === 1) {
        expect(title).toBe("Second");
      } else if (timesTriggered === 2) {
        expect(title).toBe("Third");
      } else {
        expect(false).toBe(true);
      }
      timesTriggered++;
    });

    expect(timesTriggered).toBe(0);
    provider.remove("First");
    expect(timesTriggered).toBe(1);
    provider.remove("Second");
    expect(timesTriggered).toBe(2);
    provider.remove("Third");
    expect(timesTriggered).toBe(3);
  });
  it("emits clear event properly", function () {
    var timesTriggered = 0;

    provider.onDidClear(function () {
      timesTriggered++;
    });

    expect(timesTriggered).toBe(0);
    provider.clear();
    expect(timesTriggered).toBe(1);
    provider.clear();
    expect(timesTriggered).toBe(2);
    provider.clear();
    expect(timesTriggered).toBe(3);
    provider.clear();
    expect(timesTriggered).toBe(4);
  });
  it("emits destroy event properly", function () {
    var timesTriggered = 0;

    provider.onDidDispose(function () {
      timesTriggered++;
    });

    expect(timesTriggered).toBe(0);
    provider.dispose();
    expect(timesTriggered).toBe(1);
    provider.dispose();
    expect(timesTriggered).toBe(1);
    provider.dispose();
    expect(timesTriggered).toBe(1);
    provider.dispose();
    expect(timesTriggered).toBe(1);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL215dWdhLy5hdG9tL3BhY2thZ2VzL2J1c3ktc2lnbmFsL3NwZWMvcHJvdmlkZXItc3BlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzsyQkFFcUIsaUJBQWlCOzs7O0FBRXRDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsWUFBVztBQUM5QixNQUFJLFFBQVEsWUFBQSxDQUFDOztBQUViLFlBQVUsQ0FBQyxZQUFXO0FBQ3BCLFlBQVEsR0FBRyw4QkFBYyxDQUFDO0dBQzNCLENBQUMsQ0FBQztBQUNILFdBQVMsQ0FBQyxZQUFXO0FBQ25CLFlBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztHQUNwQixDQUFDLENBQUM7O0FBRUgsSUFBRSxDQUFDLDBCQUEwQixFQUFFLFlBQVc7QUFDeEMsUUFBSSxjQUFjLEdBQUcsQ0FBQyxDQUFDOztBQUV2QixZQUFRLENBQUMsUUFBUSxDQUFDLFVBQVMsS0FBSyxFQUFFO0FBQ2hDLFVBQUksY0FBYyxLQUFLLENBQUMsRUFBRTtBQUN4QixjQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztPQUMvRCxNQUFNLElBQUksY0FBYyxLQUFLLENBQUMsRUFBRTtBQUMvQixjQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztPQUNoRSxNQUFNLElBQUksY0FBYyxLQUFLLENBQUMsRUFBRTtBQUMvQixjQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztPQUMvRCxNQUFNO0FBQ0wsY0FBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUMxQjtBQUNELG9CQUFjLEVB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Qyw4QkFBOEIsRUFBRSxZQUFXO0FBQzVDLFFBQUksY0FBYyxHQUFHLENBQUMsQ0FBQzs7QUFFdkIsWUFBUSxDQUFDLFlBQVksQ0FBQyxZQUFXO0FBQy9CLG9CQUFjLEVBQUUsQ0FBQztLQUNsQixDQUFDLENBQUM7O0FBRUgsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDbkIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDbkIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDbkIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDbkIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztHQUNoQyxDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvbXl1Z2EvLmF0b20vcGFja2FnZXMvYnVzeS1zaWduYWwvc3BlYy9wcm92aWRlci1zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0IFByb3ZpZGVyIGZyb20gXCIuLi9saWIvcHJvdmlkZXJcIjtcblxuZGVzY3JpYmUoXCJQcm92aWRlclwiLCBmdW5jdGlvbigpIHtcbiAgbGV0IHByb3ZpZGVyO1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XG4gICAgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIoKTtcbiAgfSk7XG4gIGFmdGVyRWFjaChmdW5jdGlvbigpIHtcbiAgICBwcm92aWRlci5kaXNwb3NlKCk7XG4gIH0pO1xuXG4gIGl0KFwiZW1pdHMgYWRkIGV2ZW50IHByb3Blcmx5XCIsIGZ1bmN0aW9uKCkge1xuICAgIGxldCB0aW1lc1RyaWdnZXJlZCA9IDA7XG5cbiAgICBwcm92aWRlci5vbkRpZEFkZChmdW5jdGlvbih0aXRsZSkge1xuICAgICAgaWYgKHRpbWVzVHJpZ2dlcmVkID09PSAwKSB7XG4gICAgICAgIGV4cGVjdCh0aXRsZSkudG9FcXVhbCh7IHRpdGxlOiBcIkZpcnN0XCIsIG9wdGlvbnM6IHVuZGVmaW5lZCB9KTtcbiAgICAgIH0gZWxzZSBpZiAodGltZXNUcmlnZ2VyZWQgPT09IDEpIHtcbiAgICAgICAgZXhwZWN0KHRpdGxlKS50b0VxdWFsKHsgdGl0bGU6IFwiU2Vjb25kXCIsIG9wdGlvbnM6IHVuZGVmaW5lZCB9KTtcbiAgICAgIH0gZWxzZSBpZiAodGltZXNUcmlnZ2VyZWQgPT09IDIpIHtcbiAgICAgICAgZXhwZWN0KHRpdGxlKS50b0VxdWFsKHsgdGl0bGU6IFwiVGhpcmRcIiwgb3B0aW9uczogdW5kZWZpbmVkIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXhwZWN0KGZhbHNlKS50b0JlKHRydWUpO1xuICAgICAgfVxuICAgICAgdGltZXNUcmlnZ2VyZWQrKztcbiAgICB9KTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMCk7XG4gICAgcHJvdmlkZXIuYWRkKFwiRmlyc3RcIik7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDEpO1xuICAgIHByb3ZpZGVyLmFkZChcIlNlY29uZFwiKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMik7XG4gICAgcHJvdmlkZXIuYWRkKFwiVGhpcmRcIik7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDMpO1xuICB9KTtcbiAgaXQoXCJlbWl0cyByZW1vdmUgZXZlbnQgcHJvcGVybHlcIiwgZnVuY3Rpb24oKSB7XG4gICAgbGV0IHRpbWVzVHJpZ2dlcmVkID0gMDtcblxuICAgIHByb3ZpZGVyLm9uRGlkUmVtb3ZlKGZ1bmN0aW9uKHRpdGxlKSB7XG4gICAgICBpZiAodGltZXNUcmlnZ2VyZWQgPT09IDApIHtcbiAgICAgICAgZXhwZWN0KHRpdGxlKS50b0JlKFwiRmlyc3RcIik7XG4gICAgICB9IGVsc2UgaWYgKHRpbWVzVHJpZ2dlcmVkID09PSAxKSB7XG4gICAgICAgIGV4cGVjdCh0aXRsZSkudG9CZShcIlNlY29uZFwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGltZXNUcmlnZ2VyZWQgPT09IDIpIHtcbiAgICAgICAgZXhwZWN0KHRpdGxlKS50b0JlKFwiVGhpcmRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHBlY3QoZmFsc2UpLnRvQmUodHJ1ZSk7XG4gICAgICB9XG4gICAgICB0aW1lc1RyaWdnZXJlZCsrO1xuICAgIH0pO1xuXG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDApO1xuICAgIHByb3ZpZGVyLnJlbW92ZShcIkZpcnN0XCIpO1xuICAgIGV4cGVjdCh0aW1lc1RyaWdnZXJlZCkudG9CZSgxKTtcbiAgICBwcm92aWRlci5yZW1vdmUoXCJTZWNvbmRcIik7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDIpO1xuICAgIHByb3ZpZGVyLnJlbW92ZShcIlRoaXJkXCIpO1xuICAgIGV4cGVjdCh0aW1lc1RyaWdnZXJlZCkudG9CZSgzKTtcbiAgfSk7XG4gIGl0KFwiZW1pdHMgY2xlYXIgZXZlbnQgcHJvcGVybHlcIiwgZnVuY3Rpb24oKSB7XG4gICAgbGV0IHRpbWVzVHJpZ2dlcmVkID0gMDtcblxuICAgIHByb3ZpZGVyLm9uRGlkQ2xlYXIoZnVuY3Rpb24oKSB7XG4gICAgICB0aW1lc1RyaWdnZXJlZCsrO1xuICAgIH0pO1xuXG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDApO1xuICAgIHByb3ZpZGVyLmNsZWFyKCk7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDEpO1xuICAgIHByb3ZpZGVyLmNsZWFyKCk7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDIpO1xuICAgIHByb3ZpZGVyLmNsZWFyKCk7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDMpO1xuICAgIHByb3ZpZGVyLmNsZWFyKCk7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDQpO1xuICB9KTtcbiAgaXQoXCJlbWl0cyBkZXN0cm95IGV2ZW50IHByb3Blcmx5XCIsIGZ1bmN0aW9uKCkge1xuICAgIGxldCB0aW1lc1RyaWdnZXJlZCA9IDA7XG5cbiAgICBwcm92aWRlci5vbkRpZERpc3Bvc2UoZnVuY3Rpb24oKSB7XG4gICAgICB0aW1lc1RyaWdnZXJlZCsrO1xuICAgIH0pO1xuXG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDApO1xuICAgIHByb3ZpZGVyLmRpc3Bvc2UoKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMSk7XG4gICAgcHJvdmlkZXIuZGlzcG9zZSgpO1xuICAgIGV4cGVjdCh0aW1lc1RyaWdnZXJlZCkudG9CZSgxKTtcbiAgICBwcm92aWRlci5kaXNwb3NlKCk7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDEpO1xuICAgIHByb3ZpZGVyLmRpc3Bvc2UoKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMSk7XG4gIH0pO1xufSk7XG4iXX0=